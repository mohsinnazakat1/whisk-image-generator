{% extends "image_generator/base.html" %}

{% block content %}
<div class="container">
    <h1>Whisk Image Generator</h1>

    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}

    {% if not settings_configured %}
        <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
            <strong>⚠️ Setup Required:</strong> Please <a href="{% url 'whisk_settings' %}" style="color: #1877f2; text-decoration: underline;">configure your Whisk API settings</a> before generating images.
        </div>
    {% endif %}

    <form class="prompt-form" action="{% url 'generate_image' %}" method="post">
        {% csrf_token %}
        <textarea name="prompt" placeholder="Enter a creative prompt..." required>{{ prompt|default:'' }}</textarea>
        <button type="submit">Generate Images</button>
    </form>

    {% if generated_image %}
        <div class="image-gallery">
            <h2>Generated Image</h2>
            <div class="image-grid">
                <div class="image-card">
                    <img src="{{ generated_image }}" alt="Generated Image">
                    <div class="image-actions">
                        <a href="#" class="preview-btn" data-src="{{ generated_image }}">Preview</a>
                        <a href="{{ generated_image }}" download="generated_image.png">Download</a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
